/**
 * @constructor
 */
function App() {

    this.date = new Date;
    this.interval = 15;
    this.duration = '00:15:00';
    this.startWork = '09:00:00';
    this.endWork = '20:00:00';

    /**
     * @param method
     * @return void
     */
    this.showLoader = function (method) {
        let loader = $('.loader-container');
        (method) ? loader.fadeIn() : loader.fadeOut();
    };

    /**
     * @param url
     * @param callable
     * @return void
     */
    this.showModal = function (url, callable) {
        $('#modal').empty().load(url, null, callable).modal('show');
    };

    /**
     * @param date
     * @return boolean
     */
    this.validDates = function (date) {
        let that = this;
        return date.getTime() >= 8400000;
    };

    /**
     * @param selector
     * @param restrict
     * @return void
     */
    this.renderDatePicker = function (selector, restrict) {
        let that = this;
        $(selector).datepicker({
            format: 'dd.mm.yyyy',
            language: 'sr-latin',
            autoclose: true,
            todayHighlight: true,
            orientation: "bottom auto",
            defaultViewDate: {
                day: that.date.getDay(),
                month: that.date.getMonth(),
                year: that.date.getFullYear()
            },
            beforeShowDay: function (date) {
                if (restrict)
                    return that.validDates(date);
            }
        });
    };

    /**
     * @param selector
     * @return void
     */
    this.renderTimePicker = function (selector) {
        let that = this;
        $(selector).timepicker({
            timeFormat: 'HH:mm',
            interval: that.interval,
            minTime: '9',
            maxTime: '20:00',
            defaultTime: '9',
            startTime: '09:00',
            dynamic: false,
            dropdown: true,
            scrollbar: false
        });
    };

    /**
     * @param selector
     * @param height
     * @return void
     */
    this.tinymceRender = function (selector, height) {
        tinymce.init({
            selector: selector,
            theme: 'modern',
            height: height,
            plugins: [
                'advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker',
                'searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking',
                'save table contextmenu directionality paste textcolor',
                'imagetools'
            ],
            toolbar1: 'cut copy paste | searchreplace | bullist numlist | outdent indent | undo redo | link unlink anchor | table | hr removeformat | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | fontselect fontsizeselect forecolor | fullscreen | subscript superscript',
            menubar: true,
            toolbar_items_size: 'small',
            style_formats: [
                {title: 'Bold text', inline: 'b'},
                {title: 'Red text', inline: 'span', styles: {color: '#ff0000'}},
                {title: 'Red header', block: 'h1', styles: {color: '#ff0000'}},
                {title: 'Example 1', inline: 'span', classes: 'example1'},
                {title: 'Example 2', inline: 'span', classes: 'example2'},
                {title: 'Table styles'},
                {title: 'Table row 1', selector: 'tr', classes: 'tablerow1'}
            ],
            font_formats: 'Andale Mono=andale mono,times;' +
            'Arial=arial,helvetica,sans-serif;' +
            'Arial Black=arial black,avant garde;' +
            'Book Antiqua=book antiqua,palatino;' +
            'Comic Sans MS=comic sans ms,sans-serif;' +
            'Courier New=courier new,courier;' +
            'Georgia=georgia,palatino;' +
            'Helvetica=helvetica;' +
            'Impact=impact,chicago;' +
            'Symbol=symbol;' +
            'Tahoma=tahoma,arial,helvetica,sans-serif;' +
            'Terminal=terminal,monaco;' +
            'Times New Roman=times new roman,times;' +
            'Trebuchet MS=trebuchet ms,geneva;' +
            'Verdana=verdana,geneva;' +
            'Webdings=webdings;' +
            'Wingdings=wingdings,zapf dingbats',
            fontsize_formats: '8px 9px 10px 11px 12px 14px 16px 18px 20px 22px 24px 26px 28px 36px 48px 72px'
        });
    };

    /**
     * @param word
     * @return string
     */
    this.transliterate = function (word) {
        let answer = "", a = {};
        a["А"] = "A";
        a["Б"] = "B";
        a["В"] = "V";
        a["Г"] = "G";
        a["Д"] = "D";
        a["Ђ"] = "Đ";
        a["Е"] = "E";
        a["Ж"] = "Ž";
        a["З"] = "Z";
        a["И"] = "I";
        a["Ј"] = "J";
        a["К"] = "K";
        a["Л"] = "L";
        a["Љ"] = "Lj";
        a["М"] = "M";
        a["Н"] = "N";
        a["Њ"] = "Nj";
        a["О"] = "O";
        a["П"] = "P";
        a["Р"] = "R";
        a["С"] = "S";
        a["Т"] = "T";
        a["Ћ"] = "Ć";
        a["У"] = "U";
        a["Ф"] = "F";
        a["Х"] = "H";
        a["Ц"] = "C";
        a["Ч"] = "Č";
        a["Џ"] = "Dž";
        a["Ш"] = "Š";
        a["а"] = "a";
        a["б"] = "b";
        a["в"] = "v";
        a["г"] = "g";
        a["д"] = "d";
        a["ђ"] = "đ";
        a["е"] = "e";
        a["ж"] = "ž";
        a["з"] = "z";
        a["и"] = "i";
        a["ј"] = "j";
        a["к"] = "k";
        a["л"] = "l";
        a["љ"] = "lj";
        a["м"] = "m";
        a["н"] = "n";
        a["њ"] = "nj";
        a["о"] = "o";
        a["п"] = "p";
        a["р"] = "r";
        a["с"] = "s";
        a["т"] = "t";
        a["ћ"] = "ć";
        a["у"] = "u";
        a["ф"] = "f";
        a["х"] = "h";
        a["ц"] = "c";
        a["ч"] = "č";
        a["џ"] = "dž";
        a["ш"] = "š";
        for (let i in word)
            if (word.hasOwnProperty(i))
                answer += (a[word[i]] === undefined) ? word[i] : a[word[i]];
        return answer;
    };

    /**
     * @param selector
     * @return void
     */
    this.loadAssociateField = function (selector) {
        let hash = $('option:selected', selector).data('hash');
        $('.recommendation-type-container').each(function () {
            $(this).hide().removeAttr('name');
        });
        $(hash).show().find('select').attr('name', 'associate');
    };

}